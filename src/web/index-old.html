<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CS Animation Platform</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/js-yaml@4.1.0/dist/js-yaml.min.js"></script>
</head>
<body>
  <header>
    <h1>CS Animation Platform</h1>
    <p class="subtitle">Prompt &rarr; AI &rarr; animated CS education video</p>
    <button id="help-btn" class="btn-help" title="Help (press ?)">?</button>
  </header>

  <main>
    <!-- LEFT: Editor Panel -->
    <div class="panel editor-panel">
      <!-- Prompt Section -->
      <div class="prompt-section">
        <div class="section-header">
          <span>Describe your animation</span>
          <div class="controls">
            <select id="preset-select">
              <option value="">Load preset...</option>
              <option value="bfs">BFS Walkthrough</option>
              <option value="dfs">DFS Traversal</option>
              <option value="stack">Stack Operations</option>
            </select>
          </div>
        </div>
        <div class="prompt-row">
          <textarea id="prompt-input" placeholder="e.g. Explain backpropagation step by step with a simple neural network..." rows="3"></textarea>
          <button id="generate-btn" class="btn-generate">Generate</button>
        </div>
        <div id="generate-status" class="generate-status" style="display:none"></div>
      </div>

      <!-- Show Meta Section -->
      <div class="meta-section" id="meta-section" style="display:none">
        <div class="section-header collapsible" id="meta-toggle">
          <span>Show Settings (palette, defaults)</span>
          <span class="toggle-icon">&#9660;</span>
        </div>
        <div id="meta-editor-wrap" class="meta-editor-wrap">
          <textarea id="meta-editor" spellcheck="false" rows="10"></textarea>
        </div>
      </div>

      <!-- Scene Tabs + Editor -->
      <div class="scenes-section" id="scenes-section" style="display:none">
        <div class="section-header">
          <span>Scenes</span>
          <button id="render-btn" class="btn-primary">Render Video</button>
        </div>
        <div id="scene-tabs" class="scene-tabs"></div>
        <div class="scene-editor-wrap">
          <textarea id="scene-editor" spellcheck="false"></textarea>
        </div>
      </div>
    </div>

    <!-- RIGHT: Preview Panel -->
    <div class="panel preview-panel">
      <div class="panel-header">
        <span>Preview</span>
        <a id="download-link" class="btn-download" style="display:none" download>Download MP4</a>
      </div>

      <div id="preview-area">
        <div id="status-message" class="status">
          Enter a prompt and click Generate, or load a preset.
        </div>
        <div id="progress-bar-container" style="display:none">
          <div id="progress-bar"></div>
          <span id="progress-text">0%</span>
        </div>
        <video id="video-player" controls style="display:none"></video>
        <div id="warnings-area" style="display:none"></div>
      </div>
    </div>
  </main>

  <!-- Help Modal -->
  <div id="help-modal" class="modal-overlay" style="display:none">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Editing Guide</h2>
        <button id="help-close" class="btn-close">&times;</button>
      </div>
      <div class="modal-tabs">
        <button class="tab-btn active" data-tab="quickstart">Quick Start</button>
        <button class="tab-btn" data-tab="actions">Actions</button>
        <button class="tab-btn" data-tab="patterns">Patterns</button>
        <button class="tab-btn" data-tab="troubleshooting">Troubleshooting</button>
        <button class="tab-btn" data-tab="reference">Reference</button>
      </div>
      <div class="modal-body">

        <!-- Quick Start Tab -->
        <div class="tab-content active" data-tab="quickstart">
          <h3>Welcome to the CS Animation Editor</h3>
          <p>You're editing a <strong>multi-scene animation manifest</strong>. Each manifest defines what objects appear on screen (graphs, text, data structures) and how they animate over time.</p>

          <h4>Your Editing Workflow</h4>
          <ol>
            <li><strong>Review Show Settings:</strong> Click "Show Settings" to view global palette colors and default styles. These apply to all scenes.</li>
            <li><strong>Navigate Scenes:</strong> Click through scene tabs to explore each part of your animation. AI typically generates 6-12 scenes.</li>
            <li><strong>Edit YAML:</strong> Modify the YAML directly in the editor. You can change colors, timings, text content, and animation sequences.</li>
            <li><strong>Render:</strong> Click "Render Video" when ready. The system will validate all scenes and produce an MP4.</li>
          </ol>

          <h4>Common First Edits</h4>
          <div class="pattern-card">
            <h4>Change Palette Colors</h4>
            <p>In Show Settings, find the <code>palette</code> section:</p>
            <div class="code-block">
              <pre>palette:
  visited: "#ff6b6b"  # Red
  queued: "#ffd93d"   # Yellow
  current: "#6bff6b"  # Green</pre>
              <button class="copy-btn">Copy</button>
            </div>
            <p class="tip">Change hex codes to customize colors throughout all scenes.</p>
          </div>

          <div class="pattern-card">
            <h4>Adjust Animation Speed</h4>
            <p>Find any action in the timeline and change its <code>duration</code>:</p>
            <div class="code-block">
              <pre>- action: fade-in
  target: title
  duration: 1s      # Try: 0.5s (faster) or 2s (slower)</pre>
              <button class="copy-btn">Copy</button>
            </div>
          </div>

          <div class="pattern-card">
            <h4>Add Pauses</h4>
            <p>Give viewers time to read by adding pauses between actions:</p>
            <div class="code-block">
              <pre>- action: set-text
  target: narration
  value: "Step 1: Initialize the queue"
- action: pause
  duration: 2s      # 2 second pause to read</pre>
              <button class="copy-btn">Copy</button>
            </div>
            <p class="tip">Use 1-3s pauses after important text or visual changes.</p>
          </div>

          <div class="pattern-card">
            <h4>Change Text Content</h4>
            <p>Update any text by finding the <code>set-text</code> action:</p>
            <div class="code-block">
              <pre>- action: set-text
  target: title
  value: "Your custom title here"</pre>
              <button class="copy-btn">Copy</button>
            </div>
          </div>

          <p><strong>Next:</strong> Explore the <strong>Actions</strong> tab for a complete reference, or <strong>Patterns</strong> for reusable animation recipes.</p>
        </div>

        <!-- Actions Reference Tab -->
        <div class="tab-content" data-tab="actions">
          <h3>Action Reference</h3>
          <p>All 16 available actions with required fields (in <strong>bold</strong>) and optional fields (in <em>italic</em>).</p>

          <input type="text" id="action-filter" placeholder="Search actions by name or category...">

          <h4>Visibility</h4>
          <div class="action-row" data-name="fade-in" data-category="visibility">
            <h5>fade-in</h5>
            <p>Fade an object from transparent to fully visible.</p>
            <p><strong>Required:</strong> target, duration &nbsp; | &nbsp; <em>Optional:</em> easing</p>
            <div class="code-block">
              <pre>- action: fade-in
  target: my-graph
  duration: 0.8s
  easing: easeOutCubic</pre>
              <button class="copy-btn">Copy</button>
            </div>
          </div>

          <div class="action-row" data-name="fade-out" data-category="visibility">
            <h5>fade-out</h5>
            <p>Fade an object from visible to transparent.</p>
            <p><strong>Required:</strong> target, duration &nbsp; | &nbsp; <em>Optional:</em> easing</p>
            <div class="code-block">
              <pre>- action: fade-out
  target: my-graph
  duration: 0.5s</pre>
              <button class="copy-btn">Copy</button>
            </div>
          </div>

          <h4>Graph Actions</h4>
          <div class="action-row" data-name="highlight-node" data-category="graph">
            <h5>highlight-node</h5>
            <p>Change a graph node's fill color (use for visited, current, etc.).</p>
            <p><strong>Required:</strong> target, node, color, duration &nbsp; | &nbsp; <em>Optional:</em> easing</p>
            <div class="code-block">
              <pre>- action: highlight-node
  target: my-graph
  node: A
  color: $visited
  duration: 0.3s</pre>
              <button class="copy-btn">Copy</button>
            </div>
          </div>

          <div class="action-row" data-name="highlight-edge" data-category="graph">
            <h5>highlight-edge</h5>
            <p>Change an edge's color (use for traversal paths).</p>
            <p><strong>Required:</strong> target, edge, color, duration &nbsp; | &nbsp; <em>Optional:</em> easing</p>
            <div class="code-block">
              <pre>- action: highlight-edge
  target: my-graph
  edge: [A, B]
  color: $current
  duration: 0.3s</pre>
              <button class="copy-btn">Copy</button>
            </div>
          </div>

          <div class="action-row" data-name="move-node" data-category="graph">
            <h5>move-node</h5>
            <p>Animate a graph node to a new position.</p>
            <p><strong>Required:</strong> target, node, position, duration &nbsp; | &nbsp; <em>Optional:</em> easing</p>
            <div class="code-block">
              <pre>- action: move-node
  target: my-graph
  node: A
  position: { x: 500, y: 300 }
  duration: 1s</pre>
              <button class="copy-btn">Copy</button>
            </div>
          </div>

          <h4>Data Structure Actions</h4>
          <div class="action-row" data-name="enqueue" data-category="data-structure">
            <h5>enqueue</h5>
            <p>Add values to the end of a queue.</p>
            <p><strong>Required:</strong> target, values, duration &nbsp; | &nbsp; <em>Optional:</em> easing</p>
            <div class="code-block">
              <pre>- action: enqueue
  target: my-queue
  values: [A, B]
  duration: 0.4s</pre>
              <button class="copy-btn">Copy</button>
            </div>
          </div>

          <div class="action-row" data-name="dequeue" data-category="data-structure">
            <h5>dequeue</h5>
            <p>Remove the front value from a queue.</p>
            <p><strong>Required:</strong> target, duration &nbsp; | &nbsp; <em>Optional:</em> easing</p>
            <div class="code-block">
              <pre>- action: dequeue
  target: my-queue
  duration: 0.4s</pre>
              <button class="copy-btn">Copy</button>
            </div>
          </div>

          <div class="action-row" data-name="push" data-category="data-structure">
            <h5>push</h5>
            <p>Push values onto the top of a stack.</p>
            <p><strong>Required:</strong> target, values, duration &nbsp; | &nbsp; <em>Optional:</em> easing</p>
            <div class="code-block">
              <pre>- action: push
  target: my-stack
  values: [X]
  duration: 0.4s</pre>
              <button class="copy-btn">Copy</button>
            </div>
          </div>

          <div class="action-row" data-name="pop" data-category="data-structure">
            <h5>pop</h5>
            <p>Pop the top value from a stack.</p>
            <p><strong>Required:</strong> target, duration &nbsp; | &nbsp; <em>Optional:</em> easing</p>
            <div class="code-block">
              <pre>- action: pop
  target: my-stack
  duration: 0.4s</pre>
              <button class="copy-btn">Copy</button>
            </div>
          </div>

          <h4>Text Actions</h4>
          <div class="action-row" data-name="set-text" data-category="text">
            <h5>set-text</h5>
            <p>Change text content instantly or with typing animation.</p>
            <p><strong>Required:</strong> target, value &nbsp; | &nbsp; <em>Optional:</em> duration, easing</p>
            <div class="code-block">
              <pre>- action: set-text
  target: narration
  value: "Step 1: Initialize"</pre>
              <button class="copy-btn">Copy</button>
            </div>
          </div>

          <h4>Movement</h4>
          <div class="action-row" data-name="move-to" data-category="movement">
            <h5>move-to</h5>
            <p>Move any object (text, data structure) to a new position.</p>
            <p><strong>Required:</strong> target, position, duration &nbsp; | &nbsp; <em>Optional:</em> easing</p>
            <div class="code-block">
              <pre>- action: move-to
  target: legend
  position: { x: 100, y: 100 }
  duration: 0.6s</pre>
              <button class="copy-btn">Copy</button>
            </div>
          </div>

          <h4>Camera</h4>
          <div class="action-row" data-name="camera-zoom" data-category="camera">
            <h5>camera-zoom</h5>
            <p>Zoom in or out. Scale 1.0 = normal, 2.0 = 2x zoom, 0.5 = zoomed out.</p>
            <p><strong>Required:</strong> scale, duration &nbsp; | &nbsp; <em>Optional:</em> target, easing</p>
            <div class="code-block">
              <pre>- action: camera-zoom
  scale: 1.5
  duration: 1s
  easing: easeInOutCubic</pre>
              <button class="copy-btn">Copy</button>
            </div>
          </div>

          <div class="action-row" data-name="camera-pan" data-category="camera">
            <h5>camera-pan</h5>
            <p>Pan the camera to focus on a specific position.</p>
            <p><strong>Required:</strong> position, duration &nbsp; | &nbsp; <em>Optional:</em> easing</p>
            <div class="code-block">
              <pre>- action: camera-pan
  position: { x: 960, y: 540 }
  duration: 0.8s</pre>
              <button class="copy-btn">Copy</button>
            </div>
          </div>

          <div class="action-row" data-name="camera-reset" data-category="camera">
            <h5>camera-reset</h5>
            <p>Reset camera zoom and pan to default (1.0 scale, centered).</p>
            <p><strong>Required:</strong> duration &nbsp; | &nbsp; <em>Optional:</em> easing</p>
            <div class="code-block">
              <pre>- action: camera-reset
  duration: 0.8s</pre>
              <button class="copy-btn">Copy</button>
            </div>
          </div>

          <h4>Style</h4>
          <div class="action-row" data-name="set-style" data-category="style">
            <h5>set-style</h5>
            <p>Animate style properties like fill, stroke, fontSize, etc.</p>
            <p><strong>Required:</strong> target, style, duration &nbsp; | &nbsp; <em>Optional:</em> node, easing</p>
            <div class="code-block">
              <pre>- action: set-style
  target: title
  style:
    fontSize: 48
    color: "#ffffff"
  duration: 0.5s</pre>
              <button class="copy-btn">Copy</button>
            </div>
          </div>

          <h4>Timing</h4>
          <div class="action-row" data-name="pause" data-category="timing">
            <h5>pause</h5>
            <p>Wait without animating anything. Essential for pacing.</p>
            <p><strong>Required:</strong> duration</p>
            <div class="code-block">
              <pre>- action: pause
  duration: 2s</pre>
              <button class="copy-btn">Copy</button>
            </div>
          </div>
        </div>

        <!-- Patterns Tab -->
        <div class="tab-content" data-tab="patterns">
          <h3>Common Patterns</h3>
          <p>Reusable animation recipes to improve your videos.</p>

          <div class="pattern-card">
            <h4>1. Reveal-Hide Pattern</h4>
            <p>Show something, give viewers time to see it, then hide it.</p>
            <div class="code-block">
              <pre>- action: fade-in
  target: explanation
  duration: 0.5s
- action: pause
  duration: 3s         # Time to read
- action: fade-out
  target: explanation
  duration: 0.3s</pre>
              <button class="copy-btn">Copy</button>
            </div>
            <p class="tip"><strong>When to use:</strong> Temporary explanations, hints, or step-by-step instructions.</p>
          </div>

          <div class="pattern-card">
            <h4>2. Synchronized Highlights</h4>
            <p>Highlight multiple nodes or edges at the exact same time using parallel blocks.</p>
            <div class="code-block">
              <pre>- parallel:
    - action: highlight-node
      target: my-graph
      node: A
      color: $visited
      duration: 0.4s
    - action: highlight-node
      target: my-graph
      node: B
      color: $visited
      duration: 0.4s
    - action: highlight-edge
      target: my-graph
      edge: [A, B]
      color: $current
      duration: 0.4s</pre>
              <button class="copy-btn">Copy</button>
            </div>
            <p class="tip"><strong>When to use:</strong> Showing connections, comparing multiple items, simultaneous state changes.</p>
          </div>

          <div class="pattern-card">
            <h4>3. Step-by-Step Narration</h4>
            <p>Update text, pause for reading, then perform the action.</p>
            <div class="code-block">
              <pre>- action: set-text
  target: narration
  value: "Step 1: Enqueue node A"
- action: pause
  duration: 2s
- action: enqueue
  target: my-queue
  values: [A]
  duration: 0.5s
- action: pause
  duration: 1s</pre>
              <button class="copy-btn">Copy</button>
            </div>
            <p class="tip"><strong>When to use:</strong> Educational walkthroughs, algorithm visualizations.</p>
          </div>

          <div class="pattern-card">
            <h4>4. Focus Zoom</h4>
            <p>Zoom into a specific area, highlight it, then zoom back out.</p>
            <div class="code-block">
              <pre>- action: camera-zoom
  scale: 1.8
  duration: 0.8s
- action: highlight-node
  target: my-graph
  node: A
  color: $current
  duration: 0.3s
- action: pause
  duration: 2s
- action: camera-reset
  duration: 0.8s</pre>
              <button class="copy-btn">Copy</button>
            </div>
            <p class="tip"><strong>When to use:</strong> Drawing attention to details, complex graphs with many nodes.</p>
          </div>

          <div class="pattern-card">
            <h4>5. Data Flow Visualization</h4>
            <p>Show data moving from one structure to another.</p>
            <div class="code-block">
              <pre>- action: dequeue
  target: my-queue
  duration: 0.4s
- action: highlight-edge
  target: my-graph
  edge: [Queue, Node]
  color: $current
  duration: 0.3s
- action: highlight-node
  target: my-graph
  node: A
  color: $visited
  duration: 0.3s</pre>
              <button class="copy-btn">Copy</button>
            </div>
            <p class="tip"><strong>When to use:</strong> BFS, DFS, graph traversals, data transformations.</p>
          </div>

          <div class="pattern-card">
            <h4>6. Scene Pacing Guidelines</h4>
            <p><strong>Quick actions (0.3-0.5s):</strong> Highlights, small color changes</p>
            <p><strong>Medium actions (0.8-1.2s):</strong> Fades, movements, zooms</p>
            <p><strong>Long pauses (2-4s):</strong> After text updates, after complex visuals</p>
            <p><strong>Short pauses (0.5-1s):</strong> Between rapid actions, micro-breaks</p>
            <p class="tip"><strong>Rule of thumb:</strong> Viewers need 1-2 seconds per sentence of text.</p>
          </div>
        </div>

        <!-- Troubleshooting Tab -->
        <div class="tab-content" data-tab="troubleshooting">
          <h3>Troubleshooting</h3>
          <p>Common errors and how to fix them.</p>

          <h4>Validation Errors</h4>

          <div class="error-example">
            Error: "Missing required field: meta"
          </div>
          <div class="solution-example">
            <strong>Solution:</strong> Ensure your Show Settings include a <code>meta</code> section with <code>title</code>, <code>canvas</code>, and <code>palette</code>.
          </div>

          <div class="error-example">
            Error: "Object 'X' missing required field: 'Y'"
          </div>
          <div class="solution-example">
            <strong>Solution:</strong> Add the missing field to the object. For example, if <code>id: my-graph</code> is missing <code>nodes</code>:
            <div class="code-block">
              <pre>- id: my-graph
  type: graph
  nodes: []        # Add this
  edges: []</pre>
              <button class="copy-btn">Copy</button>
            </div>
          </div>

          <div class="error-example">
            Error: "Action references unknown object 'X'"
          </div>
          <div class="solution-example">
            <strong>Solution:</strong> Check that the <code>target</code> field in your action matches an <code>id</code> in the <code>objects</code> section. Case-sensitive!
            <div class="code-block">
              <pre># In objects:
- id: my-graph
  type: graph
  ...

# In timeline (target must match):
- action: fade-in
  target: my-graph  # Must be exact match</pre>
              <button class="copy-btn">Copy</button>
            </div>
          </div>

          <div class="error-example">
            Error: "Action references unknown palette color '$visited'"
          </div>
          <div class="solution-example">
            <strong>Solution:</strong> Define the color in the Show Settings palette section:
            <div class="code-block">
              <pre>meta:
  palette:
    visited: "#ff6b6b"  # Add this
    queued: "#ffd93d"
    current: "#6bff6b"</pre>
              <button class="copy-btn">Copy</button>
            </div>
          </div>

          <div class="error-example">
            Error: "Duplicate object id: 'X'"
          </div>
          <div class="solution-example">
            <strong>Solution:</strong> Each object must have a unique <code>id</code>. Rename one of them:
            <div class="code-block">
              <pre>- id: my-graph       # Unique
- id: my-graph-2     # Changed to be unique</pre>
              <button class="copy-btn">Copy</button>
            </div>
          </div>

          <div class="error-example">
            Error: "Invalid duration format"
          </div>
          <div class="solution-example">
            <strong>Solution:</strong> Use one of these formats: <code>"1s"</code>, <code>"500ms"</code>, or <code>0.5</code> (number).
            <div class="code-block">
              <pre># Valid:
duration: "1s"      # 1 second (string)
duration: "500ms"   # 500 milliseconds (string)
duration: 0.5       # 0.5 seconds (number)

# Invalid:
duration: 1         # Missing unit if string
duration: "1"       # No unit</pre>
              <button class="copy-btn">Copy</button>
            </div>
          </div>

          <h4>YAML Syntax Errors</h4>

          <div class="error-example">
            Error: "Invalid YAML"
          </div>
          <div class="solution-example">
            <strong>Common causes:</strong>
            <ul>
              <li><strong>Missing colon:</strong> <code>action fade-in</code> should be <code>action: fade-in</code></li>
              <li><strong>Incorrect indentation:</strong> Use exactly 2 spaces per level (not tabs!)</li>
              <li><strong>Unclosed quotes:</strong> <code>value: "Hello</code> should be <code>value: "Hello"</code></li>
              <li><strong>Missing dash:</strong> Array items need <code>-</code> before them</li>
            </ul>
            <p><strong>Quick fix:</strong> Copy a working scene and modify it rather than writing from scratch.</p>
          </div>

          <h4>Unexpected Visual Results</h4>

          <div class="solution-example">
            <strong>Problem:</strong> Animation is too fast or too slow
            <p><strong>Solution:</strong> Adjust <code>duration</code> values. Remember that parallel blocks complete when the longest action finishes.</p>
          </div>

          <div class="solution-example">
            <strong>Problem:</strong> Objects not visible in video
            <p><strong>Solution:</strong> Check these:
              <ul>
                <li>Did you <code>fade-in</code> the object in the timeline?</li>
                <li>Is the position within canvas bounds (0-1920 for x, 0-1080 for y)?</li>
                <li>For text objects, does <code>content</code> have a value (not empty string)?</li>
              </ul>
            </p>
          </div>

          <div class="solution-example">
            <strong>Problem:</strong> Palette colors not working
            <p><strong>Solution:</strong> Ensure palette references start with <code>$</code> and are defined in Show Settings:
              <div class="code-block">
                <pre># In Show Settings meta.palette:
palette:
  visited: "#ff6b6b"

# In timeline:
color: $visited      # Must start with $</pre>
                <button class="copy-btn">Copy</button>
              </div>
            </p>
          </div>
        </div>

        <!-- Reference Tab -->
        <div class="tab-content" data-tab="reference">
          <h3>Manifest Reference</h3>
          <p>Comprehensive documentation for the YAML manifest format.</p>

          <h4>Coordinate System</h4>
          <p>The canvas uses <strong>absolute screen coordinates</strong> where <code>(0, 0)</code> is the top-left corner.</p>
          <ul>
            <li>Canvas size: <code>1920 x 1080</code> (standard 1080p)</li>
            <li>Canvas center: <code>(960, 540)</code></li>
            <li>Position format: <code>{ x: 960, y: 540 }</code> or <code>x: 960, y: 540</code></li>
          </ul>

          <h4>Object Types</h4>

          <h5>Graph</h5>
          <p>Node-and-edge graphs for algorithms, trees, networks.</p>
          <div class="code-block">
            <pre>- id: my-graph
  type: graph
  nodes:
    - { id: A, label: A, x: 500, y: 300 }
    - { id: B, label: B, x: 700, y: 300 }
  edges:
    - { from: A, to: B }
  style:                  # Optional, overrides defaults
    nodeRadius: 30
    nodeColor: "#4a4a6a"
    edgeColor: "#3a3a5a"</pre>
            <button class="copy-btn">Copy</button>
          </div>

          <h5>Data Structure</h5>
          <p>Queues, stacks, arrays, linked lists for algorithm visualization.</p>
          <div class="code-block">
            <pre>- id: my-queue
  type: data-structure
  variant: queue        # queue | stack | array | linked-list
  position: { x: 960, y: 800 }
  style:
    cellWidth: 70
    cellHeight: 50
    fillColor: "#2a2a4a"</pre>
            <button class="copy-btn">Copy</button>
          </div>

          <h5>Text</h5>
          <p>Labels, titles, narration, bullet points.</p>
          <div class="code-block">
            <pre>- id: title
  type: text
  content: "Hello World"    # Can be empty ""
  position: { x: 960, y: 100 }
  style:
    font: "bold 42px sans-serif"
    align: center           # center | left | right
    color: "#ffffff"</pre>
            <button class="copy-btn">Copy</button>
          </div>

          <h4>Palette System</h4>
          <p>Define colors once in Show Settings, reference everywhere with <code>$name</code>.</p>
          <div class="code-block">
            <pre>meta:
  palette:
    visited: "#ff6b6b"
    queued: "#ffd93d"
    current: "#6bff6b"

# In timeline:
- action: highlight-node
  color: $visited        # Resolves to "#ff6b6b"</pre>
            <button class="copy-btn">Copy</button>
          </div>
          <p><strong>Inheritance:</strong> Show-level palette is automatically available in all scenes.</p>

          <h4>Defaults System</h4>
          <p>Set default styles per object type in Show Settings:</p>
          <div class="code-block">
            <pre>meta:
  defaults:
    graph:
      nodeRadius: 30
      nodeColor: "#4a4a6a"
    data-structure:
      cellWidth: 60
      cellHeight: 40
    text:
      font: "20px sans-serif"
      color: "#e0e0ff"</pre>
            <button class="copy-btn">Copy</button>
          </div>
          <p>Individual objects can override these with their own <code>style</code> field.</p>

          <h4>Easing Functions</h4>
          <p>Control animation acceleration/deceleration. Default is <code>linear</code>.</p>
          <ul style="columns: 2; column-gap: 20px;">
            <li>linear</li>
            <li>easeIn, easeOut, easeInOut</li>
            <li>easeInSine, easeOutSine, easeInOutSine</li>
            <li>easeInQuad, easeOutQuad, easeInOutQuad</li>
            <li>easeInCubic, easeOutCubic, easeInOutCubic</li>
            <li>easeInQuart, easeOutQuart, easeInOutQuart</li>
            <li>easeInExpo, easeOutExpo, easeInOutExpo</li>
            <li>easeInBack, easeOutBack, easeInOutBack</li>
            <li>easeInBounce, easeOutBounce, easeInOutBounce</li>
            <li>easeInElastic, easeOutElastic, easeInOutElastic</li>
          </ul>
          <p>Set globally in <code>meta.easing</code> or per-action:</p>
          <div class="code-block">
            <pre>- action: fade-in
  target: title
  duration: 1s
  easing: easeOutCubic    # Overrides global</pre>
            <button class="copy-btn">Copy</button>
          </div>

          <h4>Multi-Scene Structure</h4>
          <p>Shows consist of multiple scenes with transitions between them.</p>
          <ul>
            <li><strong>Show Settings:</strong> Global palette, defaults, easing inherited by all scenes</li>
            <li><strong>Scenes:</strong> Each has its own objects and timeline</li>
            <li><strong>Transitions:</strong> <code>none</code>, <code>fade</code>, <code>crossfade</code>, <code>slide-left</code>, <code>slide-right</code></li>
          </ul>

          <h4>Duration Formats</h4>
          <p>Three ways to specify duration:</p>
          <ul>
            <li><code>"0.5s"</code> — seconds (string with unit)</li>
            <li><code>"500ms"</code> — milliseconds (string with unit)</li>
            <li><code>0.5</code> — seconds (number, no quotes)</li>
          </ul>

          <h4>Parallel Blocks</h4>
          <p>Run multiple actions simultaneously:</p>
          <div class="code-block">
            <pre>- parallel:
    - action: fade-in
      target: title
      duration: 1s
    - action: fade-in
      target: graph
      duration: 1s</pre>
            <button class="copy-btn">Copy</button>
          </div>
          <p>The block completes when the longest action finishes.</p>

          <p><strong>For complete documentation, see MANUAL.md in the project repository.</strong></p>
        </div>

      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
